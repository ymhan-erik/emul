
***
# 계측기사용법  
계측기 주요기능은 2가지.  
- pcap 파일 재생  
- uplan 패킷 캡처  
  
  
***
## .pcap 파일 재생  
1. pcap -> bin 파일로 변환  
2. bin 파일을 재생  
  
>예제> tx_pat.pcap을 재생하는 예제, '/emulator/util' 폴더에 'tx_pat.pcap'파일을 미리 복사놓은 상태로 가정.  
>>cd /emulator/util  
>>./conv-pcapng-axi128nsec.py ./tx_pat.pcapng ./ tx_pat.bin 0 0  
>>cp -rf ./tx_pat.bin /emulator  
>>cd /emulator  
>>./emul_pcap_play 1 tx_pat.bin  20 0 1 0  
>>> '1': enable; '0'이면 재생이 안된다.  
>>> 'tx_pat.bin': filename; 이 파일을 재생해라.  
>>> '0': play_count; 무한히 재생. '1'은 한번 재생, '2'는 두번재생..... '0'은 무한재생  
>>> '1': pps_src; external pps에 동기해서 재생해다. 외부 pps와 10M 입력이 없는 경우에는 '0'으로 설정한다.  
>>> '0': delay;pps에 '0'-ns이후부터 재생해라  1000이면 1us지나고 재생을 하라는 의미.
  
  
***
## uplan 패킷을 캡처하여 pcap파일로 저장
1. 외부장비와 pps,10m를 동기한다.
2. uplan 패킷이 들어오는 확인한다.
3. 캡처한다.
3. pcap으로 만든다.

>예제> 외부에서 pps와 10Mhz를 받는 다는 가정으로.  캡처대상과 동기되지 않으면 기준 없이 캡처가된다.  
>동기를 하면 pps의 rising이 생긴다음부터 설정한 카운트만큼 캡처가 시작된다.
>>cd /emulator/
>>./diag_pps_sel 1
>>./emul_capture 4 0
>>cd /emulator/util
>>./save_port0
>>./save_port1
>>./save_port2
>>./save_port3


